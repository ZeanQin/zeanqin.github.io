__NUXT_JSONP__("/articles/deploy-nuxtjs-app-to-azure", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai){return {data:[{article:{title:"Deplying NuxtJS app to Azure with continous deployment",excerpt:"How to deploy a NuxtJS app to Azure with continous deployment",category:"Frontend",tags:["Vue.js","Nuxt.js","Azure Web App"],createdAt:"2019-08-12T14:00:00.000Z",updatedAt:"2020-08-16T05:31:20.308Z",enableComments:K,enableTOC:K,toc:[{id:L,depth:r,text:M},{id:N,depth:r,text:O},{id:P,depth:r,text:Q},{id:R,depth:r,text:S},{id:T,depth:r,text:U}],body:{type:"root",children:[{type:b,tag:s,props:{id:L},children:[{type:b,tag:h,props:{href:"#the-distribution-files-you-need",ariaHidden:t,tabIndex:u},children:[{type:b,tag:d,props:{className:[v,w]},children:[]}]},{type:a,value:M}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:"The folders and files that need to be in the "},{type:b,tag:f,props:{},children:[{type:a,value:"wwwroot"}]},{type:a,value:" folder:"}]},{type:a,value:c},{type:b,tag:x,props:{},children:[{type:a,value:c},{type:b,tag:g,props:{},children:[{type:b,tag:f,props:{},children:[{type:a,value:".nuxt\u002F"}]},{type:a,value:" - The "},{type:b,tag:f,props:{},children:[{type:a,value:".nuxt"}]},{type:a,value:" folder generated by running "},{type:b,tag:f,props:{},children:[{type:a,value:"nuxt build"}]},{type:a,value:k}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:b,tag:f,props:{},children:[{type:a,value:"static\u002F"}]}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:b,tag:f,props:{},children:[{type:a,value:"server\u002F"}]}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:b,tag:f,props:{},children:[{type:a,value:"nuxt.config.js"}]}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:b,tag:f,props:{},children:[{type:a,value:"package.json"}]}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:b,tag:f,props:{},children:[{type:a,value:"web.config"}]},{type:a,value:" - The config file for Azure web app for Nuxt to work. Azure will create one if it's not supplied but the default one won't work for Nuxt. I used "},{type:b,tag:V,props:{src:"scripts\u002Fweb.config",name:"this one"},children:[]},{type:a,value:k}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:s,props:{id:N},children:[{type:b,tag:h,props:{href:"#set-up-continuous-deployment-using-kudu",ariaHidden:t,tabIndex:u},children:[{type:b,tag:d,props:{className:[v,w]},children:[]}]},{type:a,value:O}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:b,tag:h,props:{href:"https:\u002F\u002Fgithub.com\u002Fprojectkudu\u002Fkudu",rel:[l,m,n],target:o},children:[{type:a,value:"Kudu"}]},{type:a,value:" is the engine behind git\u002Fhg deployments, WebJobs, and various other features in Azure Web Sites."}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:"It connects to a particular branch in your repository and watches changes to it. Upon detecting a change, it will fetche the code from your repository into the \"repository\" folder on the server. It'll then looks for a "},{type:b,tag:f,props:{},children:[{type:a,value:W}]},{type:a,value:" file which can trigger a custom deployment script "},{type:b,tag:f,props:{},children:[{type:a,value:"deploy.md"}]},{type:a,value:k}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:"The two additional files are:"}]},{type:a,value:c},{type:b,tag:x,props:{},children:[{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:c},{type:b,tag:j,props:{},children:[{type:b,tag:f,props:{},children:[{type:a,value:W}]},{type:a,value:X},{type:b,tag:h,props:{href:"https:\u002F\u002Fgithub.com\u002Fprojectkudu\u002Fkudu\u002Fwiki\u002FCustomizing-deployments#deployment-file",rel:[l,m,n],target:o},children:[{type:a,value:"Deployment configuration files"}]},{type:a,value:" let you override the default heuristics of deployment by allowing you to specify a project or folder to be deployed. It has to be at the root of the repository and it's in .ini format. For example, it can be,"}]},{type:a,value:c},{type:b,tag:y,props:{className:[z]},children:[{type:b,tag:A,props:{className:[B,Y]},children:[{type:b,tag:f,props:{},children:[{type:a,value:"[config]\ncommand = deploy.cmd\n"}]}]}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:c},{type:b,tag:j,props:{},children:[{type:b,tag:f,props:{},children:[{type:a,value:"deploy.cmd"}]},{type:a,value:" - The custom script that builds your project and copy the distribution files to the webroot. The file I used can be downloaded "},{type:b,tag:V,props:{src:"scripts\u002Fdeploy.cmd",name:"here"},children:[]},{type:a,value:k}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:s,props:{id:P},children:[{type:b,tag:h,props:{href:"#set-node-and-npm-version-in-azure-web-app",ariaHidden:t,tabIndex:u},children:[{type:b,tag:d,props:{className:[v,w]},children:[]}]},{type:a,value:Q}]},{type:a,value:c},{type:b,tag:F,props:{},children:[{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"Check the supported runtime environments by,"},{type:b,tag:x,props:{},children:[{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"Using the Kudu service in your web app, or"}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"going directly to "},{type:b,tag:h,props:{href:Z,rel:[l,m,n],target:o},children:[{type:a,value:Z}]}]},{type:a,value:c}]}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"Set the version of node by,"},{type:b,tag:x,props:{},children:[{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"adding "},{type:b,tag:f,props:{},children:[{type:a,value:"WEBSITE_NODE_DEFAULT_VERSION"}]},{type:a,value:" to the application settings in the Azure portal. See "},{type:b,tag:h,props:{href:_,rel:[l,m,n],target:o},children:[{type:a,value:_}]}]},{type:a,value:c}]}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"Verify the node version and npm version by,"},{type:b,tag:F,props:{},children:[{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"going to Kudu \u003E console"}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"run "},{type:b,tag:f,props:{},children:[{type:a,value:"node -v"}]},{type:a,value:" and "},{type:b,tag:f,props:{},children:[{type:a,value:"npm -v"}]}]},{type:a,value:c}]}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:s,props:{id:R},children:[{type:b,tag:h,props:{href:"#set-up-environment-variables-in-azure",ariaHidden:t,tabIndex:u},children:[{type:b,tag:d,props:{className:[v,w]},children:[]}]},{type:a,value:S}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:"Nuxt uses webpack's "},{type:b,tag:f,props:{},children:[{type:a,value:"definePlugin"}]},{type:a,value:" to define the environmental variable. According to "},{type:b,tag:h,props:{href:G,rel:[l,m,n],target:o},children:[{type:a,value:"webpack website"}]}]},{type:a,value:c},{type:b,tag:y,props:{className:[z]},children:[{type:b,tag:A,props:{className:[B,Y]},children:[{type:b,tag:f,props:{},children:[{type:a,value:"The `DefinePlugin` allows you to create global constants which can be configured at compile time. This can be useful for allowing different behavior between development builds and production builds. If you perform logging in your development build but not in the production build you might use a global constant to determine whether logging takes place. That's where DefinePlugin shines, set it and forget it rules for development and production builds.\n"}]}]}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:"This means that the actual "},{type:b,tag:f,props:{},children:[{type:a,value:"process"}]},{type:a,value:" or "},{type:b,tag:f,props:{},children:[{type:a,value:"process.env"}]},{type:a,value:" from Node.js is neither available nor defined. Each of the env properties defined in nuxt.config.js is individually mapped to "},{type:b,tag:f,props:{},children:[{type:a,value:"process.env.xxxx"}]},{type:a,value:" and converted during compilation."}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:"As an example,"}]},{type:a,value:c},{type:b,tag:y,props:{className:[z]},children:[{type:b,tag:A,props:{className:[B,$]},children:[{type:b,tag:f,props:{},children:[{type:b,tag:d,props:{className:[e,aa,H]},children:[{type:a,value:"export"}]},{type:a,value:p},{type:b,tag:d,props:{className:[e,aa,H]},children:[{type:a,value:"default"}]},{type:a,value:p},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:C}]},{type:a,value:"\n  env"},{type:b,tag:d,props:{className:[e,q]},children:[{type:a,value:D}]},{type:a,value:p},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:C}]},{type:a,value:"\n    apiuri"},{type:b,tag:d,props:{className:[e,q]},children:[{type:a,value:D}]},{type:a,value:ab},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:k}]},{type:b,tag:d,props:{className:[e,E]},children:[{type:a,value:I}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:k}]},{type:b,tag:d,props:{className:[e,ac]},children:[{type:a,value:ad}]},{type:a,value:p},{type:b,tag:d,props:{className:[e,q]},children:[{type:a,value:"||"}]},{type:a,value:p},{type:b,tag:d,props:{className:[e,"string"]},children:[{type:a,value:"'default value'"}]},{type:a,value:"\n  "},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:J}]},{type:a,value:c},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:J}]},{type:a,value:c}]}]}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:"Here we use the API_KEY environment variable defined as part of the Azure application settings, if it's available, and assign that to "},{type:b,tag:f,props:{},children:[{type:a,value:"apiuri"}]},{type:a,value:k}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:"These will be processed at build time and then made available using the name you give them, e.g."}]},{type:a,value:c},{type:b,tag:y,props:{className:[z]},children:[{type:b,tag:A,props:{className:[B,$]},children:[{type:b,tag:f,props:{},children:[{type:a,value:H},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:k}]},{type:b,tag:d,props:{className:[e,E]},children:[{type:a,value:"exports"}]},{type:a,value:p},{type:b,tag:d,props:{className:[e,q]},children:[{type:a,value:"="}]},{type:a,value:p},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:C}]},{type:a,value:"\n  fireConfig"},{type:b,tag:d,props:{className:[e,q]},children:[{type:a,value:D}]},{type:a,value:p},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:C}]},{type:a,value:"\n    apiKey"},{type:b,tag:d,props:{className:[e,q]},children:[{type:a,value:D}]},{type:a,value:ab},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:k}]},{type:b,tag:d,props:{className:[e,E]},children:[{type:a,value:I}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:k}]},{type:b,tag:d,props:{className:[e,E]},children:[{type:a,value:"firebaseApiKey"}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:","}]},{type:a,value:"  # "},{type:b,tag:d,props:{className:[e,"maybe-class-name"]},children:[{type:a,value:"Not"}]},{type:a,value:p},{type:b,tag:d,props:{className:[e,ac]},children:[{type:a,value:ad}]},{type:a,value:"\n    "},{type:b,tag:d,props:{className:[e,"comment"]},children:[{type:a,value:"\u002F\u002F ..."}]},{type:a,value:c},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:J}]},{type:b,tag:d,props:{className:[e,i]},children:[{type:a,value:";"}]},{type:a,value:c}]}]}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:a,value:"You can asscess the defined "},{type:b,tag:f,props:{},children:[{type:a,value:"api"}]},{type:a,value:" variable,"}]},{type:a,value:c},{type:b,tag:x,props:{},children:[{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:ae},{type:b,tag:f,props:{},children:[{type:a,value:"process.env.apiKey"}]},{type:a,value:", or"}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:ae},{type:b,tag:f,props:{},children:[{type:a,value:"context.env.apiKey"}]},{type:a,value:", see "},{type:b,tag:h,props:{href:"https:\u002F\u002Fnuxtjs.org\u002Fapi\u002Fcontext",rel:[l,m,n],target:o},children:[{type:a,value:"context API"}]},{type:a,value:k}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:j,props:{},children:[{type:b,tag:"em",props:{},children:[{type:a,value:"Please note: the implication is that once you have deinfed a property in Azure, changes to it will not take effect unless you re-build the application."}]}]},{type:a,value:c},{type:b,tag:s,props:{id:T},children:[{type:b,tag:h,props:{href:"#references",ariaHidden:t,tabIndex:u},children:[{type:b,tag:d,props:{className:[v,w]},children:[]}]},{type:a,value:U}]},{type:a,value:c},{type:b,tag:F,props:{},children:[{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"\"How to deploy on Azure Portal\" - "},{type:b,tag:h,props:{href:af,rel:[l,m,n],target:o},children:[{type:a,value:af}]}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"Kudu - "},{type:b,tag:h,props:{href:ag,rel:[l,m,n],target:o},children:[{type:a,value:ag}]}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"Nuxt "},{type:b,tag:f,props:{},children:[{type:a,value:I}]},{type:a,value:" property - "},{type:b,tag:h,props:{href:ah,rel:[l,m,n],target:o},children:[{type:a,value:ah}]}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:b,tag:f,props:{},children:[{type:a,value:"DefinePlugin"}]},{type:a,value:X},{type:b,tag:h,props:{href:G,rel:[l,m,n],target:o},children:[{type:a,value:G}]}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"How to access Heroku environment variables with Nuxt.JS app - "},{type:b,tag:h,props:{href:ai,rel:[l,m,n],target:o},children:[{type:a,value:ai}]}]},{type:a,value:c}]}]},dir:"\u002Farticles",path:"\u002Farticles\u002Fdeploy-nuxtjs-app-to-azure",extension:".md",slug:"deploy-nuxtjs-app-to-azure"}}],fetch:[],mutations:void 0}}("text","element","\n","span","token","code","li","a","punctuation","p",".","nofollow","noopener","noreferrer","_blank"," ","operator",2,"h2","true",-1,"icon","icon-link","ul","div","nuxt-content-highlight","pre","line-numbers","{",":","property-access","ol","https:\u002F\u002Fwebpack.js.org\u002Fplugins\u002Fdefine-plugin\u002F","module","env","}",true,"the-distribution-files-you-need","The distribution files you need","set-up-continuous-deployment-using-kudu","Set up continuous deployment using Kudu","set-node-and-npm-version-in-azure-web-app","Set node and npm version in Azure web app","set-up-environment-variables-in-azure","Set up environment variables in Azure","references","References","asset",".deployment"," - ","language-text","https:\u002F\u002F_your-app-name_.scm.azurewebsites.net\u002F","https:\u002F\u002Fgithub.com\u002Fprojectkudu\u002Fkudu\u002Fwiki\u002FConfigurable-settings#change-the-node-version","language-js","keyword"," process","constant","API_KEY","via ","https:\u002F\u002Fnuxtjs.org\u002Ffaq\u002Fdeployment-azure-portal","https:\u002F\u002Fgithub.com\u002Fprojectkudu\u002Fkudu\u002Fwiki","https:\u002F\u002Fnuxtjs.org\u002Fapi\u002Fconfiguration-env\u002F","https:\u002F\u002Fstackoverflow.com\u002Fquestions\u002F55704031\u002Fhow-to-access-heroku-environment-variables-with-nuxt-js-app?answertab=votes#tab-top")));